<span ng-if="attr.isInternal">{{attr.title}}</span>
<item-name-and-menu menu="side" name="{{attr.title}}" type="vertex-attribute" ng-if="!attr.isInternal">

  <span ng-if="side.state.graphMode === 'bucketed' && attr.canBucket" class="de-emph">
    Graph on
    <div class="btn-group">
      <button class="btn btn-default"
              id="axis-x-{{attr.title}}"
              ng-class="{ active: side.state.attributeTitles.x === attr.title }"
              ng-click="side.toggleAttributeTitle('x', attr.title)">
        X
      </button>
      <button class="btn btn-default"
              id="axis-y-{{attr.title}}"
              ng-class="{ active: side.state.attributeTitles.y === attr.title }"
              ng-click="side.toggleAttributeTitle('y', attr.title)">
        Y
      </button>
    </div>
  </span>
  <input ng-if="side.state.attributeTitles.slider === attr.title"
         id="slider"
         type="range"
         ng-model="side.state.sliderPos"
         min="-1"
         max="101"
         tooltip="Threshold">

  <form ng-if="attr.canFilter" style="display: inline;">
    <input class="form-control filter"
           placeholder="filter"
           ng-model="side.state.filters.vertex[attr.title]"
           ng-model-options="{ updateOn: 'change blur' }"
           name="{{attr.title}}">
  </form>
  <span ng-if="side.state.graphMode === 'sampled' && side.state.display === 'svg'" class="de-emph sampled-visualizations">
    <span class="visualizations"><selected-visualization
          ng-repeat="visualization in side.filterApplied(sampledVisualizations, attr.title)"
          side="side"
          attr="attr.title"
          visualization="visualization"></selected-visualization></span>

    <span class="dropdown-toggle" dropdown-toggle data-toggle="dropdown">
      <span class="clicky glyphicon glyphicon-eye-open"
            id="visualize-as-button"
            tooltip="Visualize attribute"></span>
    </span>
    <ul class="dropdown-menu" role="menu">
      <li class="text-center">
        Visualize as...
      </li>
      <li>
        <a ng-click="side.toggleAttributeTitle('label', attr.title)" href
           id="visualize-as-label">Label</a>
      </li>
      <li ng-if="attr.typeName === 'Double'">
        <a ng-click="side.toggleAttributeTitle('size', attr.title)" href
           id="visualize-as-size">Size</a>
      </li>
      <li ng-if="attr.typeName === 'Double' || attr.typeName === 'String'">
        <a ng-click="side.toggleAttributeTitle('color', attr.title)" href
           id="visualize-as-color">Color</a>
      </li>
      <li ng-if="attr.typeName === 'Double'">
        <a ng-click="side.toggleAttributeTitle('opacity', attr.title)" href
           id="visualize-as-opacity">Opacity</a>
      </li>
      <li ng-if="attr.typeName === 'Double' && side.state.attributeTitles['label'] !== undefined">
        <a ng-click="side.toggleAttributeTitle('label size', attr.title)" href
           id="visualize-as-label-size">Label Size</a>
      </li>
      <li ng-if="(attr.typeName === 'Double' || attr.typeName === 'String') && side.state.attributeTitles['label'] !== undefined">
        <a ng-click="side.toggleAttributeTitle('label color', attr.title)" href
           id="visualize-as-label-color">Label Color</a>
      </li>
      <li ng-if="attr.typeName === 'String'">
        <a ng-click="side.toggleAttributeTitle('icon', attr.title)" href
           id="visualize-as-icon">Icon</a>
      </li>
      <li ng-if="attr.typeName === 'String'">
        <a ng-click="side.toggleAttributeTitle('image', attr.title)" href
           id="visualize-as-image">Image</a>
      </li>
      <li ng-if="attr.isNumeric">
        <a ng-click="side.toggleAttributeTitle('slider', attr.title)" href
           id="visualize-as-slider">Slider</a>
      </li>
      <li ng-if="attr.typeName === '(Double, Double)'">
        <a ng-click="side.toggleAttributeTitle('position', attr.title)" href
           id="visualize-as-position">Position</a>
      </li>
      <li ng-if="attr.typeName === '(Double, Double)'">
        <a ng-click="side.toggleAttributeTitle('geo', attr.title)" href
           id="visualize-as-geo">Geo coordinates</a>
      </li>
    </ul>
  </span>

  <histogram-button ng-show="attr.canBucket"
                    attr="attr"
                    side="side"
                    precise="precise"
                    model="histogram"
                    type="vertex"
                    tsv="histogramTSV">
  </histogram-button>
  <copy-box ng-show="histogram"
            description="Copy&nbsp;histogram to&nbsp;clipboard"
            data="{{histogramTSV}}">
  </copy-box>
  <label ng-show="showLogCheckbox()">
    <input type="checkbox" ng-model="axisOptions.logarithmic"> logarithmic
  </label>
  <label ng-show="histogram" id="precise-histogram-calculation" attr-name={{attr.title}}>
    <input type="checkbox" ng-model="precise"></input> precise
  </label>

  <div class="entry-bottom">
    <span class="type-name">{{attr.typeName}}</span>
    <span class="pull-right entity-note" trusted-html="attr.note"></span>
    <compute-progress model="attr.computeProgress"></compute-progress>
  </div>
  <div class="clearfix"></div>
  <histogram ng-show="histogram" model="histogram" attr-name="{{attr.title}}"></histogram>
</item-name-and-menu>
