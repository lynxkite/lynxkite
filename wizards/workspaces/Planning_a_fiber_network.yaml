- id: anchor
  inputs: {}
  operationId: Anchor
  parameters:
    steps: >-
      [{"title":"Understanding the problem","description":"Here comes a
      description of the problem and the format of the input
      data.","box":"SQL1_2","popup":"table"},{"title":"Data on the
      map","description":"Look at all these Access Points and target clients on
      the
      map","box":"Graph-visualization_4","popup":"visualization"},{"title":"Street
      segment data","description":"Explain the other input data, street
      segments.","box":"Import-CSV_4","popup":"table"},{"title":"Look at a small
      area","description":"Explain that we turned the data into the graph. We
      are looking at the vertices contained in a small
      area","box":"Graph-visualization_1","popup":"visualization"},{"title":"Set
      up business parameters","description":"Explain what is what. Encourage
      users to play around. Maybe mention a few parameter sets that are
      interesting.","box":"custom_boxes/OptimalFiberNetwork_1","popup":"parameters"},{"title":"Network
      plan","description":"Explain that this shows the optimal network plan for
      the optimal profit mentioned
      above.","box":"Graph-visualization_5","popup":"visualization"},{"title":"Project
      NPV","description":"Exlain. This should show how profitable fiber project
      is possible.","box":"SQL1_1","popup":"table"}]
    wizard: yes
  parametricParameters: {}
  x: -379.257406154777
  y: -15.958305709814447
- id: Graph-visualization_4
  inputs:
    graph:
      boxId: Derive-vertex-attribute_1
      id: graph
  operationId: Graph visualization
  parameters:
    state: >-
      {"left":{"graphPath":"","graphMode":"sampled","display":"svg","filters":{"vertex":{"node_type":"!Crossing"},"edge":{}},"bucketCount":4,"preciseBucketSizes":false,"relativeEdgeDensity":false,"axisOptions":{"vertex":{},"edge":{}},"sampleRadius":1,"attributeTitles":{"geo
      coordinates":"position","color":"node_type","icon":"node_type","size":"importance"},"animate":{"enabled":false,"style":"expand","labelAttraction":0},"centers":["*"],"customVisualizationFilters":false,"vertexColorMap":"Viridis","labelColorMap":"Viridis","edgeColorMap":"Viridis","sliderColorMap":"Blue
      to
      orange"},"right":{"display":"svg","filters":{"vertex":{},"edge":{}},"bucketCount":4,"preciseBucketSizes":false,"relativeEdgeDensity":false,"axisOptions":{"vertex":{},"edge":{}},"sampleRadius":1,"attributeTitles":{},"animate":{"enabled":false,"style":"expand","labelAttraction":0},"centers":["auto"],"customVisualizationFilters":false,"vertexColorMap":"Viridis","labelColorMap":"Viridis","edgeColorMap":"Viridis","sliderColorMap":"Blue
      to orange"}}
  parametricParameters: {}
  x: 700
  y: 150
- id: Derive-vertex-attribute_1
  inputs:
    graph:
      boxId: Bundle-vertex-attributes-into-a-Vector_1
      id: graph
  operationId: Derive vertex attribute
  parameters:
    defined_attrs: 'false'
    expr: if (node_type.get == "AccessPoint") Some(20000.0) else revenue
    output: importance
  parametricParameters: {}
  x: 700
  y: 450
- id: custom_boxes/OptimalFiberNetwork_1
  inputs:
    graph:
      boxId: Derive-vertex-attribute_1
      id: graph
  operationId: custom_boxes/OptimalFiberNetwork
  parameters: {}
  parametricParameters: {}
  x: 1100
  y: 450
- id: Import-CSV_3
  inputs: {}
  operationId: Import CSV
  parameters:
    filename: UPLOAD$/bb8ffb69079d472fcf6392e29fe951ff.KalocsaGeoNodes.csv
    imported_table: 1f8d2d09-7945-366c-ad4f-41e172a1550d
    infer: yes
    last_settings: |-
      {
        "sql" : "",
        "infer" : "yes",
        "timestamp_format" : "yyyy-MM-dd'T'HH:mm:ss.SSSXXX",
        "quote" : "\"",
        "imported_columns" : "",
        "null_value" : "",
        "escape" : "\\",
        "columns" : "",
        "filename" : "UPLOAD$/bb8ffb69079d472fcf6392e29fe951ff.KalocsaGeoNodes.csv",
        "comment" : "",
        "ignore_trailing_white_space" : "no",
        "ignore_leading_white_space" : "no",
        "date_format" : "yyyy-MM-dd",
        "error_handling" : "FAILFAST",
        "limit" : "",
        "delimiter" : ","
      }
  parametricParameters: {}
  x: -300
  y: 450
- id: Import-CSV_4
  inputs: {}
  operationId: Import CSV
  parameters:
    filename: UPLOAD$/9991ae421edfedde6d50bcbf33530796.KalocsaStreetSegments.csv
    imported_table: 21ef500a-5503-3e81-b4bc-ec01f0518c08
    infer: yes
    last_settings: |-
      {
        "sql" : "",
        "infer" : "yes",
        "timestamp_format" : "yyyy-MM-dd'T'HH:mm:ss.SSSXXX",
        "quote" : "\"",
        "imported_columns" : "",
        "null_value" : "",
        "escape" : "\\",
        "columns" : "",
        "filename" : "UPLOAD$/9991ae421edfedde6d50bcbf33530796.KalocsaStreetSegments.csv",
        "comment" : "",
        "ignore_trailing_white_space" : "no",
        "ignore_leading_white_space" : "no",
        "date_format" : "yyyy-MM-dd",
        "error_handling" : "FAILFAST",
        "limit" : "",
        "delimiter" : ","
      }
  parametricParameters: {}
  x: -300
  y: 650
- id: Use-table-as-vertices_2
  inputs:
    table:
      boxId: Import-CSV_3
      id: table
  operationId: Use table as vertices
  parameters: {}
  parametricParameters: {}
  x: -50
  y: 450
- id: Use-table-as-edges_2
  inputs:
    graph:
      boxId: Use-table-as-vertices_2
      id: graph
    table:
      boxId: Import-CSV_4
      id: table
  operationId: Use table as edges
  parameters:
    attr: id
    dst: dst
    src: src
  parametricParameters: {}
  x: 200
  y: 450
- id: Graph-visualization_1
  inputs:
    graph:
      boxId: Derive-vertex-attribute_1
      id: graph
  operationId: Graph visualization
  parameters:
    state: >-
      {"left":{"graphPath":"","graphMode":"sampled","display":"svg","filters":{"vertex":{"lat":"[46.526,46.533]","lon":"[18.98,18.99]"},"edge":{}},"bucketCount":4,"preciseBucketSizes":false,"relativeEdgeDensity":false,"axisOptions":{"vertex":{"lat":{"logarithmic":false},"lon":{"logarithmic":true}},"edge":{}},"sampleRadius":1,"attributeTitles":{"geo
      coordinates":"position","size":"importance","color":"node_type","icon":"node_type"},"animate":{"enabled":false,"style":"expand","labelAttraction":0},"centers":["*"],"customVisualizationFilters":true,"vertexColorMap":"Viridis","labelColorMap":"Viridis","edgeColorMap":"Viridis","sliderColorMap":"Blue
      to
      orange","lastCentersRequest":{"count":1,"filters":[{"attributeName":"node_type","valueSpec":"AccessPoint"}]},"lastCentersResponse":["-9158709130960041817"],"edgeStyle":"undirected"},"right":{"display":"svg","filters":{"vertex":{},"edge":{}},"bucketCount":4,"preciseBucketSizes":false,"relativeEdgeDensity":false,"axisOptions":{"vertex":{},"edge":{}},"sampleRadius":1,"attributeTitles":{},"animate":{"enabled":false,"style":"expand","labelAttraction":0},"centers":["auto"],"customVisualizationFilters":false,"vertexColorMap":"Viridis","labelColorMap":"Viridis","edgeColorMap":"Viridis","sliderColorMap":"Blue
      to orange"}}
  parametricParameters: {}
  x: 1100
  y: 150
- id: SQL1_1
  inputs:
    input:
      boxId: custom_boxes/OptimalFiberNetwork_1
      id: graph
  operationId: SQL1
  parameters:
    sql: >
      select CAST(ProjectNPV / 1000 as INT) as `Optimal Net Present Value for
      your fiber project (in thousand USD)` from graph_attributes
  parametricParameters: {}
  x: 1400
  y: 150
- id: SQL1_2
  inputs:
    input:
      boxId: Import-CSV_3
      id: table
  operationId: SQL1
  parameters:
    sql: |
      (select * from input where  node_type = 'Crossing' limit 3)
      UNION
      (select * from input where  node_type = 'Client' limit 3)
      UNION
      (select * from input where  node_type = 'AccessPoint' limit 3)
  parametricParameters: {}
  x: -50
  y: 200
- id: Bundle-vertex-attributes-into-a-Vector_1
  inputs:
    graph:
      boxId: Use-table-as-edges_2
      id: graph
  operationId: Bundle vertex attributes into a Vector
  parameters:
    elements: 'lat,lon'
    output: position
  parametricParameters: {}
  x: 450
  y: 450
- id: Graph-visualization_5
  inputs:
    graph:
      boxId: custom_boxes/OptimalFiberNetwork_1
      id: graph
  operationId: Graph visualization
  parameters:
    state: >-
      {"left":{"projectPath":"","graphMode":"sampled","display":"svg","filters":{"vertex":{},"edge":{}},"bucketCount":4,"preciseBucketSizes":false,"relativeEdgeDensity":false,"axisOptions":{"vertex":{},"edge":{}},"sampleRadius":1,"attributeTitles":{"geo
      coordinates":"position","size":"importance","color":"node_type","icon":"node_type"},"animate":{"enabled":false,"style":"expand","labelAttraction":0},"centers":["*"],"customVisualizationFilters":false,"vertexColorMap":"Viridis","labelColorMap":"Viridis","edgeColorMap":"Viridis","sliderColorMap":"Blue
      to
      orange","edgeStyle":"undirected"},"right":{"display":"svg","filters":{"vertex":{},"edge":{}},"bucketCount":4,"preciseBucketSizes":false,"relativeEdgeDensity":false,"axisOptions":{"vertex":{},"edge":{}},"sampleRadius":1,"attributeTitles":{},"animate":{"enabled":false,"style":"expand","labelAttraction":0},"centers":["auto"],"customVisualizationFilters":false,"vertexColorMap":"Viridis","labelColorMap":"Viridis","edgeColorMap":"Viridis","sliderColorMap":"Blue
      to orange"}}
  parametricParameters: {}
  x: 1400
  y: 450
